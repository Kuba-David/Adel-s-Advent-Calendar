<!DOCTYPE html>
<html lang="cs">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>AdÃ©lÄin Advent 2025</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Mountains+of+Christmas:wght@400;700&family=Quicksand:wght@400;600&display=swap"
    rel="stylesheet" />
  <style>
    /* --- RESET A ZÃKLAD --- */
    * {
      box-sizing: border-box;
    }

    body {
      font-family: "Quicksand", sans-serif;
      background-color: #386641;
      margin: 0;
      /* padding: 20px 12px; MenÅ¡Ã­ padding na mobilu */
      min-height: 100dvh;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    h1 {
      font-family: "Mountains of Christmas", cursive;
      font-weight: 700;
      /* TuÄnÃ© */
      font-size: 3rem;
      /* Trochu zvÄ›tÅ¡Ã­me */
      letter-spacing: 1px;
      margin: 0 0 8px 0;
      text-align: center;
      color: #f2e8cf;
    }

    h3 {
      font-family: "Quicksand", sans-serif;
      font-weight: 700;
      font-size: 1.3rem;
      line-height: 1;
      text-align: center;
      margin: 32px 0 0 0;
      color: #2b5233;
    }

    h4 {
      font-family: "Quicksand", sans-serif;
      font-weight: 600;
      font-size: 1rem;
      line-height: 1.2;
      text-align: center;
      margin: 12px 0 0 0;
      color: #353535;
    }

    p {
      font-family: "Quicksand", sans-serif;
      font-weight: 600;
      /* NormÃ¡lnÃ­ tlouÅ¡Å¥ka pro text */
      font-size: 1.15rem;
      line-height: 1.4;
      color: #2b5233;
      margin: 0;
    }

    /* --- NOVÃ‰: BANNERY PRO OBRÃZKY --- */
    .image-banner {
      width: 100%;
      overflow: hidden;
    }

    .image-banner img {
      width: 100%;
      height: 100%;
      max-height: 180px;
      /* MaximÃ¡lnÃ­ vÃ½Å¡ka na mobilu, aÅ¥ to nezabere celÃ½ displej */
      object-fit: cover;
      /* OÅ™Ã­zne obrÃ¡zek, aby vyplnil prostor */
      display: block;
    }

    .footer-banner {
      margin-bottom: 0;
    }

    /* --- GRID 3x8 (Mobile First) --- */
    .calendar-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      /* VÅ¾dy 3 sloupce */
      gap: 12px;
      /* Mezery mezi boxy */
      width: 100%;
      max-width: 450px;
      /* Na desktopu to nebude Å¡irÅ¡Ã­ neÅ¾ velkÃ½ mobil */
      padding: 20px 12px;
      /* MenÅ¡Ã­ padding na mobilu */
    }

    /* --- OKÃ‰NKA --- */
    .day-box {
      font-family: "Mountains of Christmas", cursive;
      font-weight: 700;
      font-size: 2rem;
      aspect-ratio: 1 / 1;
      /* VÅ¾dy Ätverec */
      background: #386641;
      background: linear-gradient(220deg, #386641 0%, #6a994e 100%);
      border-radius: 12px;
      display: flex;
      justify-content: center;
      align-items: center;
      color: #f2e8cf;
      box-shadow: 0 2px 5px #2b5233;
      border: 2px dashed #f2e8cf;
      cursor: pointer;
      transition: transform 0.1s, background-color 0.2s;
      position: relative;
      user-select: none;
      -webkit-tap-highlight-color: transparent;
    }

    .day-box:active {
      transform: scale(0.95);
    }

    /* Stavy okÃ©nek */
    .day-box.locked {
      cursor: default;
    }

    .day-box.opened {
      border-color: #a7c957;
      color: #a7c957;
      box-shadow: inset 4px 2px 12px 2px #2b5233;
    }

    /* IndikÃ¡tor, Å¾e je "dneÅ¡ek" a jeÅ¡tÄ› nenÃ­ otevÅ™eno (volitelnÃ© vylepÅ¡enÃ­) */
    .day-box.today-active {
      animation: pulse 2s infinite;
      border-color: #f2e8cf;
      color: #f2e8cf;
    }

    @keyframes pulse {
      0% {
        box-shadow: 0 0 0 0 rgb(188, 71, 73, 0.85);
      }

      70% {
        box-shadow: 0 0 0 10px rgba(188, 71, 73, 0);
      }

      100% {
        box-shadow: 0 0 0 0 rgba(188, 71, 73, 0);
      }
    }

    /* --- MODÃLNÃ OKNO (Mobile Optimized) --- */
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: #2b5233b4;
      z-index: 2000;
      padding: 20px;
      justify-content: center;
      align-items: center;
      backdrop-filter: blur(8px);
    }

    .modal-content {
      background: #f2e8cf;
      padding: 24px;
      border-radius: 20px;
      width: 100%;
      max-width: 400px;
      text-align: left;
      position: relative;
      max-height: 90vh;
      overflow-y: auto;
      /* Kdyby byl text moc dlouhÃ½ */
      box-shadow: 0 10px 25px #2b5233b4;
    }

    .close-btn {
      position: absolute;
      top: 10px;
      right: 15px;
      font-family: "Mountains of Christmas", cursive;
      font-weight: 700;
      font-size: 3rem;
      line-height: 0.6;
      color: #bc4749;
      cursor: pointer;
      padding: 5px;
    }

    .modal-img {
      width: 100%;
      height: auto;
      border-radius: 10px;
      margin: 40px 0 24px 0;
      display: block;
    }

    .video-wrapper {
      position: relative;
      padding-bottom: 56.25%;
      /* 16:9 ratio */
      height: 0;
      margin: 40px 0 24px 0;
      border-radius: 10px;
      overflow: hidden;
      background: #000;
    }

    .video-wrapper iframe {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
    }

    /* --- HERNÃ STYLY --- */
    .game-container {
      display: flex;
      flex-direction: column;
      align-items: center;
      margin: 24px 0;
    }

    /* PiÅ¡kvorky */
    .tictactoe-board {
      display: grid;
      aspect-ratio: 1 / 1;
      width: 100%;
      grid-template-columns: repeat(3, 1fr);
      gap: 4px;
      background-color: #cac1ac;
      /* TmavÃ© pozadÃ­ mÅ™Ã­Å¾ky */
      padding: 4px;
      margin-bottom: 16px;
      border-radius: 8px;
    }

    .ttt-cell {
      width: 100%;
      height: 100%;
      aspect-ratio: 1 / 1;
      background-color: white;
      border-radius: 6px;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 3rem;
      font-weight: bold;
      cursor: pointer;
      font-family: "Mountains of Christmas", cursive;
      /* AÅ¥ to ladÃ­ */
    }

    /* KÃ¡men NÅ¯Å¾ky PapÃ­r */
    .rps-buttons {
      display: flex;
      width: 100%;
      gap: 10px;
      justify-content: center;
      margin-bottom: 16px;
    }

    .rps-btn {
      width: 100%;
      aspect-ratio: 1 / 1;
      font-size: 3rem;
      background: white;
      border: 2px solid #cac1ac;
      border-radius: 10px;
      cursor: pointer;
      transition: transform 0.1s;
    }

    .rps-btn:active {
      transform: scale(0.9);
    }

    .game-info {
      font-weight: 700;
      line-height: 2;
      margin-bottom: 16px;
      font-size: 1.2rem;
      text-align: center;
      color: #353535;
      min-height: 1.5em;
    }

    .game-result {
      font-weight: 700;
      font-size: 1.2rem;
      text-align: center;
      color: #bc4749;
      min-height: 1.5em;
    }

    .choice {
      font-size: 3rem;
      line-height: 1;
      /* Aby emoji bylo hezky vycentrovanÃ© */
      margin-bottom: 16px;
    }

    .reset-btn {
      margin: 16px auto 0 auto;
      padding: 8px 16px;
      width: 100%;
      background-color: #bc4749;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-family: "Quicksand", sans-serif;
      text-transform: uppercase;
    }

    /* PEXESO */
    .pexeso-board {
      display: grid;
      width: 100%;
      grid-template-columns: repeat(4, 1fr);
      /* MÅ™Ã­Å¾ka 4x3 */
      gap: 4px;
      margin-bottom: 16px;
    }

    .pexeso-card {
      aspect-ratio: 1;
      width: 100%;
      min-height: 60px;
      background-color: #cac1ac;
      /* Rub karty */
      border-radius: 8px;
      cursor: pointer;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 2.5rem;
      line-height: 2;
      /* Aby emoji bylo hezky vycentrovanÃ© */
      color: transparent;
      /* EmojÃ­ schovÃ¡me */
      transition: transform 0.3s, background-color 0.3s;
      user-select: none;
    }

    .pexeso-card.flipped,
    .pexeso-card.matched {
      background-color: white;
      /* LÃ­c karty */
      color: initial;
      /* EmojÃ­ ukÃ¡Å¾eme */
      border: 2px solid #cac1ac;
      transform: rotateY(180deg);
      /* Efekt otoÄenÃ­ */
    }

    /* COOKIE CLICKER (SrdÃ­ÄkovÃ¡ vÃ½zva) */
    .clicker-container {
      text-align: center;
    }

    .click-target {
      font-size: 5rem;
      cursor: pointer;
      transition: transform 0.1s;
      user-select: none;
      display: inline-block;
      margin: 20px 0;
    }

    .click-target:active {
      transform: scale(1.2);
    }

    .progress-bar-wrap {
      width: 100%;
      height: 32px;
      background-color: #bc4749;
      border-radius: 10px;
      overflow: hidden;
      margin-bottom: 10px;
    }

    .progress-bar-fill {
      height: 100%;
      background-color: #cac1ac;
      width: 0%;
      transition: width 0.1s linear;
    }

    /* WHACK-A-MOLE (ChyÅ¥ koÄku) - OPRAVENÃ‰ VELIKOSTI */
    .whack-board {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      /* 3 sloupce */
      gap: 6px;
      margin-bottom: 16px;
      width: 100%;
      /* RoztÃ¡hni se na Å¡Ã­Å™ku modalu */
      max-width: 320px;
      /* Ale nebuÄ Å¡irÅ¡Ã­ neÅ¾ mobil */
      margin-left: auto;
      /* CentrovÃ¡nÃ­ */
      margin-right: auto;
    }

    .whack-hole {
      /* TOTO JSME PÅ˜IDALI: */
      width: 100%;
      /* VyplÅˆ celÃ½ sloupec mÅ™Ã­Å¾ky */
      min-height: 80px;
      /* POJISTKA: AÅ¥ mÃ¡ dÃ­ra aspoÅˆ 80px na vÃ½Å¡ku! */
      background-color: #353535;
      border-radius: 50%;
      position: relative;
      overflow: hidden;
      border: 3px solid #555555;
      aspect-ratio: 1 / 1;
      cursor: pointer;
      /* Aby vÄ›dÄ›la, Å¾e se na to klikÃ¡ */
    }

    .whack-mole {
      width: 100%;
      height: 100%;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 3rem;
      /* ZvÄ›tÅ¡Ã­me koÄku, aÅ¥ je dobÅ™e vidÄ›t */
      position: absolute;
      top: 100%;
      /* SchovanÃ¡ dole */
      transition: top 0.1s;
      cursor: grab;
      user-select: none;
      line-height: 1;
      /* Aby emoji neposouvalo Å™Ã¡dkovÃ¡nÃ­ */
    }

    .whack-hole.up .whack-mole {
      top: 0;
      /* VyskoÄ nahoru */
    }

    /* --- GENERÃTOR AKTIVIT (DEN 17) --- */


    .activity-box {
      background: white;
      color: #353535;
      padding: 20px;
      margin: 20px 0 5px 0;
      border-radius: 12px;
      font-weight: bold;
      height: 160px;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
      font-size: 1rem;
      border: 2px dashed #cbd5e0;
      transition: all 0.3s ease;
    }

    .activity-box.highlight {
      background: #2b5233;
      border-color: #a7c957;
      color: white;
      transform: scale(1.02);
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }
  </style>
</head>

<body>
  <div class="image-banner header-banner">
    <img src="./images/kal_head.webp" alt="VÃ¡noÄnÃ­ zÃ¡hlavÃ­" />
  </div>

  <h1>Pro AdÃ©lku</h1>

  <div class="calendar-grid" id="calendar"></div>

  <div class="image-banner footer-banner">
    <img src="./images/kal_foot.webp" alt="VÃ¡noÄnÃ­ zÃ¡patÃ­" />
  </div>

  <div class="modal" id="modal">
    <div class="modal-content">
      <span class="close-btn" onclick="closeModal()">&times;</span>
      <div id="modal-body"></div>
    </div>
  </div>

  <script>
    // --- TVOJE DATA (ZkopÃ­ruj sem ten finÃ¡lnÃ­ list objektÅ¯ 1-24) ---
    const adventData = [
      // ... sem vloÅ¾ data ...
      {
        day: 1,
        type: "image",
        src: "https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExOG84OHRkN2hqbDc3cHg1NnJldXo5YnVvZ2hxZ3d1eWluMGV1NWxpaiZlcD12MV9naWZzX3NlYXJjaCZjdD1n/l29MVhX6iz7dS/giphy.gif",
        text: "LÃ¡sko moje nejmilovanÄ›jÅ¡Ã­,<br>vÃ­tej v digitÃ¡lnÃ­ verzi naÅ¡Ã­ tradice! Letos jsem musel vymÄ›nit skleniÄky a krabiÄky za pixely, protoÅ¾e dodÃ¡nÃ­ zÃ¡silek na Madeiru je jako sÃ¡zka do loterie. Ale lÃ¡ska (a zviÅ™Ã¡tka) se do jedniÄek a nul vejdou taky. ğŸ¤­<br>Tak krÃ¡snÃ½, nÃ¡Å¡ vlastnÃ­, advent! Miluju TÄ› â¤ï¸",
      },
      {
        day: 2,
        type: "image",
        src: "https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExazR6YzFnZWdqejN0ajBlcHJjcm1lMjJuc2U3MmpxbDdoYzY2eGR4OCZlcD12MV9naWZzX3NlYXJjaCZjdD1n/HXpzpXB5syQGQ/giphy.gif",
        text: 'ÃšterÃ½ je Äasto prostÄ› "ten den po pondÄ›lÃ­", ale ty jsi nejlepÅ¡ejÅ¡Ã­ beruÅ¡ka na svÄ›tÄ› a tak ho urÄitÄ› zvlÃ¡dneÅ¡ s pÅ™ehledem. A kdyby tÄ› cokoli rozladilo, posÃ­lÃ¡m koÅ¥Ã¡tka na zlepÅ¡enÃ­ nÃ¡lady. ğŸ¤­ Jo... a pÅ™ijÄ si pro pusu! â¤ï¸',
      },
      {
        day: 3,
        type: "game",
        gameType: "tictactoe", // KlÃ­ÄovÃ© slovo
        text: "Dneska si o pusu (nebo pÄ›t ğŸ¤­) musÃ­Å¡ zahrÃ¡t! KdyÅ¾ vyhrajeÅ¡, mÃ¡Å¡ je u mÄ›. ğŸ¥° A kdyÅ¾ prohrajeÅ¡... tak samozÅ™ejmÄ› taky. ğŸ˜˜",
      },
      {
        day: 4,
        type: "image",
        src: "./images/My1.webp",
        text: "VÃ­kend uÅ¾ je skoro na dohled. Dneska je tu pusa a pÅ™ipomÃ­nka, Å¾e jsi pro mÄ› ta nejlepÅ¡Ã­ z nejlepÅ¡Ã­ch na svÄ›tÄ›! â¤ï¸",
      },
      {
        day: 5,
        type: "image",
        src: "https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExdjljeDBpbDV2NWtpNHplYXF6aGFuM29pOWU4cWYxNDFtdHRpemxpYyZlcD12MV9naWZzX3NlYXJjaCZjdD1n/O1w2wSTriddUA/giphy.gif",
        text: "PÃ¡tek je tu! ğŸ‰ PracovnÃ­ tÃ½den mÃ¡me skoro za sebou. DÃ¡me si veÄer randÃ­Äko a 1to1? ğŸ¥° Miluju tÄ› a obdivuju, jak vÅ¡echno zvlÃ¡dÃ¡Å¡. â¤ï¸",
      },
      {
        day: 6,
        type: "image",
        src: "https://media3.giphy.com/media/v1.Y2lkPTc5MGI3NjExdHo0cjl6d290NmFsamVtazNxMTYyNXZ0eDRvOGFqYWwxN2k5eXBncyZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/xT9DPIBYf0pAviBLzO/giphy.gif",
        text: "VÃ­m, Å¾e hledÃ¡nÃ­ tÃ© sprÃ¡vnÃ© cesty nenÃ­ lehkÃ©, ale vÄ›Å™Ã­m v Tebe. â¤ï¸ Jsi ÃºÅ¾asnÃ¡, nejÅ¡ikovnÄ›jÅ¡Ã­ a nejskvÄ›lejÅ¡Ã­ a svÄ›t (Madeira urÄitÄ› ğŸ¤­) ti leÅ¾Ã­ u nohou. StaÄÃ­ si to jen uvÄ›domit. ğŸ¤©â¤ï¸ğŸ«¶",
      },
      {
        day: 7,
        type: "game",
        gameType: "pexeso",
        text: "SpeciÃ¡lnÃ­ pexeso pro speciÃ¡lnÃ­ Princeznu. ğŸ¤­ Najdi 6 vÄ›cÃ­, kterÃ© mÃ¡Å¡ rÃ¡da! ğŸ˜‡â¤ï¸",
      },
      {
        day: 8,
        type: "image",
        src: "https://media.giphy.com/media/v1.Y2lkPWVjZjA1ZTQ3dW00ZjRkYzBlb3k2anFkbjB6Mm40OTNraXlnNGYzZDNwa29wbXY0aSZlcD12MV9naWZzX3NlYXJjaCZjdD1n/YWIL6UbCq3SJGoSX4y/giphy.gif",
        text: "Dneska mÃ¡m dovolenou! PojÄme vyrazit nÄ›kam na stÅ™ednÄ› dlouhÃ½ hike! ğŸï¸. TeÅ¡Ã­m se na celÃ½ den s tebou ğŸ¥°",
      },
      {
        day: 9,
        type: "image",
        src: "https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExZWpkcmY1dGZtcnoxdWVtajh0a2JsczE5M2ZjZWswamlmaTdyZXR5OCZlcD12MV9naWZzX3NlYXJjaCZjdD1n/2GqXL4tCvRVkDBhMU4/giphy.gif",
        text: 'ÃšterÃ½ a zaÄÃ¡tek tvÃ© "Solo Madeira" mise! ğŸ›« Dneska odpo mÃ­Å™Ã­m do Prahy... ğŸ˜Ÿ Budu na tebe poÅ™Ã¡d myslet a urÄitÄ› to uteÄe to jako voda. UÅ¾ij si, Å¾e mÃ¡Å¡ celÃ½ byt jen pro sebe a udÄ›lej se poÅ™Ã¡dnÃ½ MY TIME. â¤ï¸',
      },
      {
        day: 10,
        type: "image",
        src: "https://media.giphy.com/media/v1.Y2lkPWVjZjA1ZTQ3aWNnMnVuZnE0eGg2YmI4NW9wdmJrdjQ4MXRtNGJxNDhxcDZleWc2YiZlcD12MV9naWZzX3NlYXJjaCZjdD1n/xT39CXg70nNS0MFNLy/giphy.gif",
        text: "Love you the biggest time! â¤ï¸",
      },
      {
        day: 11,
        type: "game",
        gameType: "rps",
        text: "ÄŒtvrtek v Praze (pravdÄ›podobnÄ› mrznu). ğŸ¥¶ I kdyÅ¾ nÃ¡s dÄ›lÃ­ pÃ¡r tisÃ­c kilometrÅ¯ a kus oceÃ¡nu, dÃ­ky kvantovÃ©mu provÃ¡zÃ¡nÃ­ (nebo prostÄ› modernÃ­m technologiÃ­m) si mÅ¯Å¾eme stÅ™ihnout KÃ¡men, NÅ¯Å¾ky, PapÃ­r. Tak co, vyhrajeÅ¡? â¤ï¸ğŸ˜˜",
      },
      {
        day: 12,
        type: "image",
        src: "./images/my3.webp",
        text: "PÃ¡tek! PoslednÃ­ veÄer o samotÄ›. Jsi stateÄnÃ¡ a ÃºÅ¾asnÃ¡, Å¾e to tam zvlÃ¡dÃ¡Å¡. ğŸ¥° Dneska si to chce jeÅ¡tÄ› poÅ™Ã¡dnÄ› uÅ¾Ã­t MY TIME, protoÅ¾e zÃ­tra... zÃ­tra uÅ¾ se vracÃ­m! ğŸ¤­ NemÅ¯Å¾u se na tebe doÄkat. â¤ï¸",
      },
      {
        day: 13,
        type: "image",
        src: "https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExNXgzM3FoaWwxZ25lZGE2MW52azB4a3d1MWo4aW01cWRxbGcyYnprZiZlcD12MV9naWZzX3NlYXJjaCZjdD1n/HUiSFpo0KfOdG/giphy.gif",
        text: "Sobota = NÃ¡vrat domÅ¯! âœˆï¸ Jestli bude vÃ­tr na letiÅ¡ti spolupracovat a pilot to trefÃ­, odpoledne jsem u tebe. PÅ™iprav se na velkÃ½ huggie a pusinky. ğŸ¤­ UÅ¾ mi to naÅ¡e ostrovnÃ­ hnÃ­zdeÄko (a hlavnÄ› ty ğŸ¥°) chybÄ›lo. Miluju tÄ›! â¤ï¸",
      },
      {
        day: 14,
        type: "game",
        gameType: "clicker",
        text: "MÃ¡Å¡ tu ode mÄ› pÅ™ipravenou zÃ¡sobu pusinek. ğŸ˜š StihneÅ¡ si je vÅ¡echny vybrat? ğŸ¤­â¤ï¸ Tak pÅ™ipravit paleÄek... pozÃ³r...",
      },
      {
        day: 15,
        type: "image",
        src: "https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExcDQzeXk4bHZ3M3psaHV3dXg4Y3pkbjN1andjNWdpOHNiZXQwbXluaiZlcD12MV9naWZzX3NlYXJjaCZjdD1n/ijoPIfKO0YQlW/giphy.gif",
        text: "DoufÃ¡m, Å¾e uÅ¾ sem zpÃ¡tky u Tebe! Å½e zlÃ¡ a otravnÃ¡ EmÃ­lie uÅ¾ nefoukÃ¡ a jÃ¡ ti mÅ¯Å¾u dÃ¡vat opravdovÃ© pusinky â¤ï¸. Miluju TÄ› nejvÃ­c na svÄ›tÄ›!",
      },
      {
        day: 16,
        type: "image",
        src: "https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExbXRvNm1hN2Zxa3ViaHZ6N3Y2YmN1MjZ4a3l3YTJjejJndGNwM3dpYyZlcD12MV9naWZzX3NlYXJjaCZjdD1n/xT9DPlAUKTl1GeZjC8/giphy.gif",
        text: 'ÃšterÃ½ je sice pracovnÃ­, ale veÄer to vypukne! ğŸ†<br><br>Zvu tÄ› na <strong>1. oficiÃ¡lnÃ­ MistrovstvÃ­ Calhety<strong> v CanastÄ›. ğŸƒğŸ†<br><br>ZatÃ­mco jÃ¡ budu buÅ¡it do klÃ¡vesnice, ty mÅ¯Å¾eÅ¡ trÃ©novat mÃ­chÃ¡nÃ­ karet a svÅ¯j "poker face".<br><br>V sÃ¡zce je totiÅ¾ Äest, slÃ¡va a... masÃ¡Å¾ vÃ­tÄ›zi! ğŸ’†â€â™‚ï¸ğŸ˜ Tak co, pÅ™ijÃ­mÃ¡Å¡ vÃ½zvu?',
      },
      {
        day: 17,
        type: "activityGenerator",
        title: "StÅ™edeÄnÃ­ rozcestnÃ­k ğŸ”®",
        text: "JÃ¡ musÃ­m zase sedÄ›t ve svÃ© Å¡peluÅˆce ğŸ’», ale to neznamenÃ¡, Å¾e ty se budeÅ¡ nudit! Nech mÅ¯j super-pokroÄilÃ½ algoritmus, aÅ¥ ti vybere misi na dneÅ¡nÃ­ den. ğŸ˜",
      },
      {
        day: 18,
        type: "image",
        src: "https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExaDlzNXI5bXVlZGppcm1zM2J4b2d2NjVlZXZid2J5OTl2aWp5MTVxYyZlcD12MV9naWZzX3NlYXJjaCZjdD1n/3oEjHFNwV614N7RAKA/giphy.gif",
        text: "Co si dnes pustit HrÃ­Å¡ÅˆÃ¡k<br>a pak si udÄ›lat pÄ›knÃ½ veÄer? ğŸ˜",
      },
      {
        day: 19,
        type: "image",
        src: "https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExamFnaGRoN2c0c3J6dnhtMnBkMWtuYWpuZDBxM2V2NHRzdzdkdXRjZCZlcD12MV9naWZzX3NlYXJjaCZjdD1n/W1hd3uXRIbddu/giphy.gif",
        text: "PoslednÃ­ pÅ™edvÃ¡noÄnÃ­ pÃ¡tek. ğŸ˜® Jsi skvÄ›lÃ¡, Å¾e to vÅ¡echno se mnou zvlÃ¡dÃ¡Å¡. ğŸ«¶ğŸ‘€ğŸ‘ƒ TÄ›Å¡Ã­m se na vÃ­kend s tebou! ğŸ¥°",
      },
      {
        day: 20,
        type: "image",
        src: "https://media.giphy.com/media/v1.Y2lkPWVjZjA1ZTQ3cWc1aGJ6aXJqOTIzZWsxbHp4bHBxeXVubTh3MWNmZGVsMWMydmVsdyZlcD12MV9naWZzX3NlYXJjaCZjdD1n/KSRj3CHz0OWcEdZ9oN/giphy.gif",
        text: "Dneska bude pohoda. â¤ï¸ Odpoledne za kamarÃ¡dama ze severu a veÄer zadÄ›lÃ¡me na vÃ¡noÄku, co Å™Ã­kÃ¡Å¡? ğŸ¥° HlavnÄ› dneska vÅ¡echno v klidu ğŸ«¶ Miluju tÄ›!",
      },
      {
        day: 21,
        type: "game",
        gameType: "whackamole",
        text: "Pozor, ÄiÄinky chtÄ›jÃ­ BUP na ÄumÃ¡Äek! ğŸ˜º Ale jsou nedochvilnÃ©... Stihni jich BUPnout aspoÅˆ 10, neÅ¾ vyprÅ¡Ã­ Äas. HodnÄ› Å¡tÄ›stÃ­! ğŸ˜½",
      },
      {
        day: 22,
        type: "image",
        src: "https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExZ3I3OGtta3IwbTR3MXFkYTIyN3gxODR2cHphdmF1Z3RmYzl4cDgyMCZlcD12MV9naWZzX3NlYXJjaCZjdD1n/ERy32lxHhXfpu/giphy.gif",
        text: "<strong>PondÄ›lÃ­.</strong> ğŸ“…<br><br>ZatÃ­mco jÃ¡ budu buÅ¡it do klÃ¡vesnice a posouvat pixely, ty mÃ¡Å¡ jedinÃ½ Ãºkol: <strong>Nenechat se niÄÃ­m rozhodit. ğŸ«¶ğŸ‘€ğŸ‘ƒ</strong><br><br>VÃ¡noce se naÄÃ­tajÃ­... ğŸ„<br>Dej si nohy nahoru a uÅ¾Ã­vej si ten madeirskej klid za nÃ¡s oba. ZaslouÅ¾Ã­Å¡ si to! ğŸ’•"
      },
      {
        day: 23,
        type: "image",
        src: "URL_OBRAZKU",
        text: "ÃšterÃ½. PÅ™edveÄer VÃ¡noc. VÅ¡echno hoÄ za hlavu, dÃ¡rky (ty virtuÃ¡lnÃ­ i nevirtuÃ¡lnÃ­) jsou pÅ™ipravenÃ©, cukrovÃ­ (snad) mÃ¡me. TÄ›Å¡Ã­m se na zÃ­tÅ™ek! ğŸ˜˜",
      },
      {
        day: 24,
        type: "video",
        src: "URL_VIDEA", // Sem dej nÄ›jakÃ© fakt pÄ›knÃ© vÃ¡noÄnÃ­ video nebo video vzkaz od tebe
        text: "VeselÃ© VÃ¡noce, AdÃ©lko moje nejmilovanÄ›jÅ¡Ã­! ğŸ„<br><br>I kdyÅ¾ jsme daleko od domova, domov je pro mÄ› tam, kde jsi ty. DÄ›kuju, Å¾e s tebou mÅ¯Å¾u proÅ¾Ã­vat tohle nejvÄ›tÅ¡Ã­ Å¾ivotnÃ­ dobrodruÅ¾stvÃ­.<br><br>Miluju tÄ› aÅ¾ za hranice vesmÃ­ru. â¤ï¸â¤ï¸â¤ï¸â¤ï¸â¤ï¸",
      },
    ];

    const calendarContainer = document.getElementById("calendar");
    const modal = document.getElementById("modal");
    const modalBody = document.getElementById("modal-body");

    const today = new Date();
    const currentMonth = today.getMonth();
    const currentDay = today.getDate();

    // DEBUG MÃ“D (true = vÅ¡e otevÅ™eno)
    const debugMode = false;

    // 1. Vygenerujeme pole ÄÃ­sel 1-24
    let daysArray = Array.from({ length: 24 }, (_, i) => i + 1);

    // 2. ZamÃ­chÃ¡me je (Shuffle)
    daysArray.sort(() => Math.random() - 0.5);

    // 3. VykreslenÃ­ gridu
    daysArray.forEach((dayNum) => {
      const item = adventData.find((d) => d.day === dayNum) || {
        day: dayNum,
        type: "text",
        text: "Obsah se pÅ™ipravuje...",
      };

      const dayEl = document.createElement("div");
      dayEl.classList.add("day-box");
      dayEl.innerText = dayNum;

      // Logika stavÅ¯
      const isDecember = currentMonth === 11;
      const isUnlocked = debugMode || (isDecember && dayNum <= currentDay);
      const isToday = isDecember && dayNum === currentDay;

      // Zkontrolujeme, zda uÅ¾ bylo otevÅ™eno (localStorage)
      const isOpenedStorage = localStorage.getItem(`day-${dayNum}`);

      if (!isUnlocked) {
        dayEl.classList.add("locked");
        dayEl.onclick = () =>
          alert(`JeÅ¡tÄ› ne! MusÃ­Å¡ vydrÅ¾et do ${dayNum}. prosince â³`);
      } else {
        dayEl.onclick = () => openDay(item, dayEl);

        if (isOpenedStorage) {
          dayEl.classList.add("opened");
        } else if (isToday) {
          dayEl.classList.add("today-active"); // ZvÃ½raznÃ­me dneÅ¡nÃ­ neotevÅ™enÃ©
        }
      }

      calendarContainer.appendChild(dayEl);
    });

    // GlobÃ¡lnÃ­ promÄ›nnÃ© pro stav her (aby se resetovaly pÅ™i otevÅ™enÃ­)
    let tttBoard = ["", "", "", "", "", "", "", "", ""];
    let gameActive = true;

    function openDay(item, element) {
      let contentHtml = "";

      // --- Typ: OBRÃZEK ---
      if (item.type === "image") {
        contentHtml = `<img src="${item.src}" class="modal-img" alt="Den ${item.day}">`;
      }
      // --- Typ: VIDEO ---
      else if (item.type === "video") {
        contentHtml = `<div class="video-wrapper"><iframe src="${item.src}" frameborder="0" allowfullscreen></iframe></div>`;
      }
      // --- Typ: HRA (PiÅ¡kvorky) ---
      else if (item.type === "game" && item.gameType === "tictactoe") {
        contentHtml = `
                  <h3>PorazÃ­Å¡ kalendÃ¡Å™<br>v piÅ¡kvorkÃ¡ch?</h3>
                  <div class="game-container">
                      <div class="tictactoe-board" id="ttt-board">
                          </div>
                      <div class="game-result" id="ttt-result">TvÅ¯j tah (X)</div>
                      <button class="reset-btn" onclick="initTicTacToe()">Zkusit znovu</button>
                  </div>
              `;
      }
      // --- Typ: HRA (KÃ¡men NÅ¯Å¾ky PapÃ­r) ---
      else if (item.type === "game" && item.gameType === "rps") {
        contentHtml = `
                  <h3>KÃ¡men, nÅ¯Å¾ky, papÃ­r!</h3>
                  <div class="game-container">
                      <div class="rps-buttons">
                          <button class="rps-btn" onclick="playRPS('âœŠ')">âœŠ</button>
                          <button class="rps-btn" onclick="playRPS('âœŒï¸')">âœŒï¸</button>
                          <button class="rps-btn" onclick="playRPS('âœ‹')">âœ‹</button>
                      </div>
                      <div class="game-info" id="rps-result">Vyber si!</div>
                  </div>
              `;
      }
      // --- PEXESO ---
      else if (item.type === "game" && item.gameType === "pexeso") {
        contentHtml = `
                  <h3>Pexesoooo!</h3>
                  <div class="game-container">
                      <div class="pexeso-board" id="pexeso-board"></div>
                      <div class="game-result" id="pexeso-result">Najdi 6 pÃ¡rÅ¯</div>
                      <button class="reset-btn" onclick="initPexeso()">ZamÃ­chat znovu</button>
                  </div>
              `;
      }
      // --- CLICKER ---
      else if (item.type === "game" && item.gameType === "clicker") {
        contentHtml = `
                  <h3>Pusinky do zÃ¡soby!</h3>
                  <h4>Klikej co nejrychleji!<br>ZbÃ½vajÃ­cÃ­ Äas: <span id="clicker-time">10</span>s</h4>
                  <div class="game-container clicker-container">
                      <div class="progress-bar-wrap"><div class="progress-bar-fill" id="clicker-progress"></div></div>
                      <div class="click-target" onclick="clickerClick()">ğŸ’‹</div>

                      <div class="game-result" id="clicker-status" style="min-height: 30px;">PÅ™iprav se...</div>

                      <button class="reset-btn" onclick="initClicker()" id="clicker-start-btn">Start!</button>
                  </div>
              `;
      }
      // --- WHACK-A-MOLE ---
      else if (item.type === "game" && item.gameType === "whackamole") {
        contentHtml = `
                  <h3>StihneÅ¡ 10 ÄiÄinek?</h3>
                   <h4>ZbÃ½vÃ¡ Äas: <span id="whack-time">15</span>s | SkÃ³re: <span id="whack-score">0</span></h4>
                  <div class="game-container">
                      <div class="whack-board" id="whack-board">
                          </div>
                      <div class="game-result" id="whack-result">PÅ™iprav se...</div>
                      <button class="reset-btn" onclick="initWhackAMole()" id="whack-start-btn">Start!</button>
                  </div>
              `;
      }
      // --- GENERÃTOR AKTIVIT ---
      else if (item.type === 'activityGenerator') {
        contentHtml = `
            <h3>${item.title}</h3>
            
            <div id="activity-result" class="activity-box">Zjisti svÅ¯j dneÅ¡nÃ­ plÃ¡n</div>
            
            <button class="reset-btn" onclick="generateActivity()">Vylosuj mi program! ğŸ²</button>
            
            <p style="margin-top: 20px; font-size: 0.9rem; opacity: 0.8;">
            </p>
        `;
      }

      // SpoleÄnÃ½ text pod obsahem
      contentHtml += `<p>${item.text}</p>`;

      modalBody.innerHTML = contentHtml;
      modal.style.display = "flex";

      // UloÅ¾enÃ­ stavu a stylu
      localStorage.setItem(`day-${item.day}`, "true");
      element.classList.remove("today-active");
      element.classList.add("opened");

      // --- INICIALIZACE HER PO VYKRESLENÃ HTML ---
      if (item.type === "game") {
        if (item.gameType === "tictactoe") initTicTacToe();
        if (item.gameType === "pexeso") initPexeso();
        if (item.gameType === "whackamole") setupWhackBoard();
      }
    }

    function closeModal() {
      modal.style.display = "none";
      modalBody.innerHTML = ""; // VymaÅ¾e obsah

      // ZastavÃ­ pÅ™Ã­padnÃ© aktivnÃ­ hernÃ­ smyÄky
      if (typeof clickerTimer !== "undefined") clearInterval(clickerTimer);
      if (typeof whackTimer !== "undefined") clearInterval(whackTimer);

      if (typeof clickerActive !== "undefined") clickerActive = false;
      if (typeof whackActive !== "undefined") whackActive = false;
    }

    window.onclick = function (event) {
      if (event.target == modal) closeModal();
    };

    // --- LOGIKA PRO PIÅ KVORKY (TIC TAC TOE) ---
    function initTicTacToe() {
      tttBoard = ["", "", "", "", "", "", "", "", ""];
      gameActive = true;
      const boardEl = document.getElementById("ttt-board");
      const resultEl = document.getElementById("ttt-result");
      resultEl.innerText = "TvÅ¯j tah (X)";

      boardEl.innerHTML = "";
      tttBoard.forEach((cell, index) => {
        const cellEl = document.createElement("div");
        cellEl.classList.add("ttt-cell");
        cellEl.onclick = () => makeMove(index);
        boardEl.appendChild(cellEl);
      });
    }

    // --- UpravenÃ¡ logika pro chytÅ™ejÅ¡Ã­ AI ---

    function makeMove(index) {
      if (!gameActive || tttBoard[index] !== "") return;

      // 1. Tah hrÃ¡Äe (X)
      tttBoard[index] = "X";
      updateBoardUI();

      if (checkWin("X")) {
        endGame("VyhrÃ¡la jsi! ğŸ‰");
        return;
      }
      if (!tttBoard.includes("")) {
        endGame("RemÃ­za! ğŸ¤");
        return;
      }

      // 2. Tah poÄÃ­taÄe (O) - ZpoÅ¾dÄ›nÃ½, aby to vypadalo, Å¾e pÅ™emÃ½Å¡lÃ­
      gameActive = false;
      const thinkingTime = Math.floor(Math.random() * 500) + 500;

      setTimeout(() => {
        // Tady volÃ¡me tu novou chytrou funkci
        let bestMove = getSmartMove();

        if (bestMove !== null && bestMove !== undefined) {
          tttBoard[bestMove] = "O";
          updateBoardUI();

          if (checkWin("O")) {
            endGame("KalendÃ¡Å™ vyhrÃ¡l! ğŸ¤–"); // TeÄ uÅ¾ se to mÅ¯Å¾e stÃ¡t!
          } else if (!tttBoard.includes("")) {
            endGame("RemÃ­za! ğŸ¤");
          } else {
            gameActive = true;
          }
        }
      }, thinkingTime); // NechÃ¡me ho "pÅ™emÃ½Å¡let"
    }

    // --- NOVÃ FUNKCE: Mozek poÄÃ­taÄe ---
    function getSmartMove() {
      const wins = [
        [0, 1, 2],
        [3, 4, 5],
        [6, 7, 8],
        [0, 3, 6],
        [1, 4, 7],
        [2, 5, 8],
        [0, 4, 8],
        [2, 4, 6],
      ];

      function findSpot(player) {
        for (let combo of wins) {
          const [a, b, c] = combo;
          const values = [tttBoard[a], tttBoard[b], tttBoard[c]];

          const countPlayer = values.filter((v) => v === player).length;
          const countEmpty = values.filter((v) => v === "").length;

          if (countPlayer === 2 && countEmpty === 1) {
            if (tttBoard[a] === "") return a;
            if (tttBoard[b] === "") return b;
            if (tttBoard[c] === "") return c;
          }
        }
        return null;
      }

      // 1. ÃšTOK: MÅ¯Å¾u hned vyhrÃ¡t? (Toho si vÅ¡imne vÅ¾dycky, to je fÃ©r)
      let move = findSpot("O");
      if (move !== null) return move;

      // 2. OBRANA: MusÃ­m blokovat hrÃ¡Äe? (Tady pÅ™idÃ¡me Å¡anci na chybu!)
      move = findSpot("X");

      // TADY JE ZMÄšNA:
      // Pokud najde hrozbu, hodÃ­ si kostkou.
      // Math.random() > 0.25 znamenÃ¡, Å¾e v 75 % pÅ™Ã­padÅ¯ zablokuje.
      // Ve 25 % pÅ™Ã­padÅ¯ (kdyÅ¾ padne 0-0.25) se tvÃ¡Å™Ã­, Å¾e to nevidÃ­ a jde dÃ¡l.
      if (move !== null && Math.random() > 0.25) {
        return move;
      }

      // 3. STRATEGIE: StÅ™ed (Taky to neudÄ›lÃ¡ vÅ¾dy, jen v 80 % pÅ™Ã­padÅ¯)
      if (tttBoard[4] === "" && Math.random() > 0.2) return 4;

      // 4. STRATEGIE: Rohy
      const corners = [0, 2, 6, 8];
      const availableCorners = corners.filter((i) => tttBoard[i] === "");
      if (availableCorners.length > 0 && Math.random() > 0.3) {
        return availableCorners[
          Math.floor(Math.random() * availableCorners.length)
        ];
      }

      // 5. NÃHODA: KdyÅ¾ nic nevymyslÃ­ (nebo kdyÅ¾ udÄ›lÃ¡ chybu v bodÄ› 2), hraje nÃ¡hodnÄ›
      let emptyIndices = tttBoard
        .map((e, i) => (e === "" ? i : null))
        .filter((e) => e !== null);
      return emptyIndices[Math.floor(Math.random() * emptyIndices.length)];
    }

    function updateBoardUI() {
      const cells = document.querySelectorAll(".ttt-cell");
      tttBoard.forEach((val, i) => {
        cells[i].innerText = val;
        cells[i].style.color = val === "X" ? "#bc4749" : "#2d3748";
      });
    }

    function checkWin(player) {
      const wins = [
        [0, 1, 2],
        [3, 4, 5],
        [6, 7, 8], // Å˜Ã¡dky
        [0, 3, 6],
        [1, 4, 7],
        [2, 5, 8], // Sloupce
        [0, 4, 8],
        [2, 4, 6], // DiagonÃ¡ly
      ];
      return wins.some((combo) => combo.every((i) => tttBoard[i] === player));
    }

    function endGame(message) {
      gameActive = false;
      document.getElementById("ttt-result").innerText = message;
    }

    // --- LOGIKA PRO KÃMEN, NÅ®Å½KY, PAPÃR ---
    function playRPS(playerChoice) {
      const choices = ["âœŠ", "âœ‹", "âœŒï¸"];
      const aiChoice = choices[Math.floor(Math.random() * choices.length)];
      const resultEl = document.getElementById("rps-result");

      let result = "";

      if (playerChoice === aiChoice) {
        result = "RemÃ­za! ğŸ¤";
      } else if (
        (playerChoice === "âœŠ" && aiChoice === "âœŒï¸") ||
        (playerChoice === "âœ‹" && aiChoice === "âœŠ") ||
        (playerChoice === "âœŒï¸" && aiChoice === "âœ‹")
      ) {
        result = "VyhrÃ¡la jsi! ğŸ‰";
      } else {
        result = "JÃ¡ vyhrÃ¡l... ğŸ«£";
      }

      resultEl.innerHTML = `TY: <span class="choice">${playerChoice}</span>   JÃ: <span class="choice">${aiChoice}</span><br><span class="game-result">${result}</span>`;
    }

    // --- PEXESO LOGIKA ---
    let pexesoCards = [];
    let flippedCards = [];
    let matchedPairs = 0;
    const totalPairs = 6; // Pro mÅ™Ã­Å¾ku 4x3

    function initPexeso() {
      const board = document.getElementById("pexeso-board");
      const result = document.getElementById("pexeso-result");
      board.innerHTML = "";
      matchedPairs = 0;
      flippedCards = [];
      result.innerText = `Najdi ${totalPairs} pÃ¡rÅ¯`;

      // Emojis pro pÃ¡ry (mÅ¯Å¾eÅ¡ nahradit i obrÃ¡zky <img>)
      const items = ["ğŸ±", "ğŸš—", "ğŸ“–", "ğŸŒŠ", "ğŸ¶", "ğŸº"];
      // ZdvojÃ­me a zamÃ­chÃ¡me
      pexesoCards = [...items, ...items].sort(() => Math.random() - 0.5);

      pexesoCards.forEach((item, index) => {
        const card = document.createElement("div");
        card.classList.add("pexeso-card");
        card.dataset.index = index;
        card.dataset.value = item;
        card.innerText = item; // Emoji je tam skrytÃ© barvou textu
        card.onclick = () => flipCard(card);
        board.appendChild(card);
      });
    }

    function flipCard(card) {
      // Pojistky: nelze kliknout na jiÅ¾ otoÄenou, hotovou, nebo kdyÅ¾ uÅ¾ jsou 2 otoÄenÃ©
      if (
        card.classList.contains("flipped") ||
        card.classList.contains("matched") ||
        flippedCards.length === 2
      )
        return;

      card.classList.add("flipped");
      flippedCards.push(card);

      if (flippedCards.length === 2) {
        checkForMatch();
      }
    }

    function checkForMatch() {
      const [card1, card2] = flippedCards;
      const isMatch = card1.dataset.value === card2.dataset.value;

      if (isMatch) {
        card1.classList.add("matched");
        card2.classList.add("matched");
        matchedPairs++;
        flippedCards = [];
        if (matchedPairs === totalPairs) {
          document.getElementById("pexeso-result").innerText =
            "Jsi skvÄ›lÃ¡! ğŸ‰";
        }
      } else {
        // Neshoda - otoÄÃ­me zpÄ›t za chvilku
        setTimeout(() => {
          card1.classList.remove("flipped");
          card2.classList.remove("flipped");
          flippedCards = [];
        }, 1000);
      }
    }

    // --- COOKIE CLICKER LOGIKA ---
    let clicks = 0;
    const clicksNeeded = 50;
    let clickerTimeLeft = 10;
    let clickerTimer = null; // DÅ¯leÅ¾itÃ©: MusÃ­ bÃ½t definovÃ¡no takto globÃ¡lnÄ›
    let clickerActive = false;

    function initClicker() {
      clicks = 0;
      clickerTimeLeft = 10;
      clickerActive = true;

      // Reset UI
      document.getElementById("clicker-time").innerText = clickerTimeLeft;
      document.getElementById("clicker-progress").style.width = "0%";
      document.getElementById("clicker-status").innerText =
        "Klikej jako o Å¾ivot!";
      document.getElementById("clicker-status").style.color = "#bc4749"; // Reset barvy textu

      document.getElementById("clicker-start-btn").style.display = "none";

      // Pojistka: ZruÅ¡it pÅ™edchozÃ­ timer, pokud bÄ›Å¾Ã­
      if (clickerTimer) clearInterval(clickerTimer);

      clickerTimer = setInterval(() => {
        // --- HLAVNÃ POJISTKA ---
        // Pokud uÅ¾ hra skonÄila (vÃ½hrou), ale timer jeÅ¡tÄ› tiknul,
        // okamÅ¾itÄ› ho zastavÃ­me a nedovolÃ­me odeÄÃ­st Äas.
        if (!clickerActive) {
          clearInterval(clickerTimer);
          return;
        }

        clickerTimeLeft--;

        // BezpeÄnÃ½ zÃ¡pis Äasu
        const timeEl = document.getElementById("clicker-time");
        if (timeEl) timeEl.innerText = clickerTimeLeft;

        // Kontrola prohry
        if (clickerTimeLeft <= 0) {
          endClicker(false);
        }
      }, 1000);
    }

    function clickerClick() {
      // Pokud hra nebÄ›Å¾Ã­, klikÃ¡nÃ­ nic nedÄ›lÃ¡
      if (!clickerActive) return;

      clicks++;

      // Progress bar
      const progress = (clicks / clicksNeeded) * 100;
      const progressEl = document.getElementById("clicker-progress");
      if (progressEl) progressEl.style.width = `${progress}%`;

      // Kontrola vÃ½hry
      if (clicks >= clicksNeeded) {
        endClicker(true);
      }
    }

    function endClicker(win) {
      // 1. OkamÅ¾itÄ› vypneme stav hry
      clickerActive = false;

      // 2. ZastavÃ­me ÄasovaÄ
      if (clickerTimer) clearInterval(clickerTimer);

      // 3. ZobrazÃ­me tlaÄÃ­tko pro restart
      document.getElementById("clicker-start-btn").style.display =
        "inline-block";

      const statusEl = document.getElementById("clicker-status");
      if (statusEl) {
        if (win) {
          statusEl.innerHTML =
            "Jsi ÃºÅ¾asnÃ¡! â¤ï¸<br>TeÄ mÃ¡Å¡ pusinky do zÃ¡soby. ğŸ¤­";
          statusEl.style.color = "#bc4749";
        } else {
          statusEl.innerHTML = "ÄŒas vyprÅ¡el! ğŸ«£<br>Zkus to znovu.";
          statusEl.style.color = "#bc4749";
        }
      }
    }

    // ================= WHACK-A-MOLE LOGIKA (OPTIMALIZOVANÃ) =================
    let whackScore = 0;
    const whackScoreNeeded = 10;
    let whackTimeLeft = 15;
    let whackTimer = null;
    let moleTimer = null;
    let whackActive = false;
    let lastHole;

    // 1. Tuto funkci volÃ¡ openDay HNED po otevÅ™enÃ­ okna
    function setupWhackBoard() {
      const board = document.getElementById("whack-board");
      board.innerHTML = "";
      // VytvoÅ™enÃ­ 9 dÄ›r okamÅ¾itÄ›
      for (let i = 0; i < 9; i++) {
        const hole = document.createElement("div");
        hole.classList.add("whack-hole");
        const mole = document.createElement("div");
        mole.classList.add("whack-mole");
        mole.innerText = "ğŸ˜º";
        mole.onclick = bonk; // KlikÃ¡nÃ­ funguje, ale bonk() zkontroluje whackActive
        hole.appendChild(mole);
        board.appendChild(hole);
      }

      // Reset textÅ¯ pro hezkÃ½ vzhled pÅ™ed startem
      document.getElementById("whack-score").innerText = "0";
      document.getElementById("whack-time").innerText = "15";
      document.getElementById("whack-result").innerHTML =
        '<span class="game-info">PÅ™iprav se...</span>';
      document.getElementById("whack-start-btn").style.display =
        "inline-block";
    }

    // 2. Tuto funkci volÃ¡ aÅ¾ tlaÄÃ­tko START
    function initWhackAMole() {
      whackScore = 0;
      whackTimeLeft = 15;
      whackActive = true;

      document.getElementById("whack-score").innerText = whackScore;
      document.getElementById("whack-time").innerText = whackTimeLeft;
      document.getElementById("whack-result").innerHTML =
        '<span class="game-info">BUP!</span>';
      document.getElementById("whack-start-btn").style.display = "none";

      // Pojistka pro vyÄiÅ¡tÄ›nÃ­ starÃ½ch intervalÅ¯
      if (whackTimer) clearInterval(whackTimer);
      if (moleTimer) clearInterval(moleTimer); // (i kdyÅ¾ moleTimer tu nepouÅ¾Ã­vÃ¡me pÅ™es interval, ale timeout, pro jistotu)

      // OdpoÄet Äasu
      whackTimer = setInterval(() => {
        if (!whackActive) {
          clearInterval(whackTimer);
          return;
        }

        whackTimeLeft--;
        const timeEl = document.getElementById("whack-time");
        if (timeEl) timeEl.innerText = whackTimeLeft;

        if (whackTimeLeft <= 0) {
          endWhackAMole(false);
        }
      }, 1000);

      // PrvnÃ­ krtek
      peep();
    }

    function randomHole(holes) {
      const idx = Math.floor(Math.random() * holes.length);
      const hole = holes[idx];
      if (hole === lastHole) return randomHole(holes);
      lastHole = hole;
      return hole;
    }

    function peep() {
      if (!whackActive) return;

      const holes = document.querySelectorAll(".whack-hole");
      if (holes.length === 0) return;

      const hole = randomHole(holes);
      hole.classList.add("up");

      const time = Math.random() * (1000 - 400) + 400;

      setTimeout(() => {
        hole.classList.remove("up");
        if (whackActive) peep();
      }, time);
    }

    function bonk(e) {
      if (!e.isTrusted || !whackActive) return;
      this.parentNode.classList.remove("up");
      whackScore++;
      document.getElementById("whack-score").innerText = whackScore;
      if (whackScore >= whackScoreNeeded) {
        endWhackAMole(true);
      }
    }

    function endWhackAMole(win) {
      whackActive = false;
      if (whackTimer) clearInterval(whackTimer);

      document.getElementById("whack-start-btn").style.display =
        "inline-block";
      const holes = document.querySelectorAll(".whack-hole");
      holes.forEach((hole) => hole.classList.remove("up"));

      const resultEl = document.getElementById("whack-result");
      if (win) {
        resultEl.innerHTML = "ParÃ¡da! ğŸ†<br>VÅ¡echny dostaly BUP! ğŸ¤­";
        resultEl.style.color = "#bc4749";
      } else {
        resultEl.innerHTML = "ÄŒas vyprÅ¡el! ğŸ«£<br>Zkus to znovu.";
        resultEl.style.color = "#bc4749";
      }
    }

    // --- GENERÃTOR AKTIVIT ---
    function generateActivity() {
      const activities = [
        "Vem si notÃ½sek a zkus navrhnout nÄ›jakÃ½ zajÃ­mavÃ½ tvar novÃ©ho hrnku ğŸº",
        "Najdi nÄ›jakou mÃ­stnÃ­ ÄiÄinku a dej jÃ­ jmÃ©no (a pohlazenÃ­) ğŸˆ",
        "UdÄ›lej si 'Pinterest hodinku' a hledej inspiraci na dalÅ¡Ã­ projekt ze dÅ™eva ğŸª‘",
        "JeÄ k oceÃ¡nu a chvÃ­li si tam Äti (bez mobilu!) ğŸŒŠ",
        "Dej si Å¡lofÃ­ka. ProstÄ› si ho dej. NaÅ™izuju to! ğŸ˜´",
        "ProjeÄ se s PunÅ¥ou po nÄ›jakÃ½ch mÃ­stnÃ­ch cestÃ¡ch v kopcÃ­ch, nÄ›kde, kde jsme jeÅ¡tÄ› nebyly ğŸš—",
        "BÄ›Å¾ k oceÃ¡nu, najdi nejhezÄÃ­ kamÃ­nek a pÅ™ines mi ho pro Å¡tÄ›stÃ­ ğŸª¨",
        "NauÄ se ÄasovÃ¡nÃ­ slovesa CHTÃT v portugalÅ¡tinÄ› ğŸ‡µğŸ‡¹",
        "VyfoÅ¥ 3 rÅ¯znÃ© textury kolem domu (detail listu, zeÄ...), kterÃ© bys mohla obtisknout na dalÅ¡Ã­ keramickÃ½ projekt ğŸ“¸",
        "PusÅ¥ si hudbu a zatancuj si, jako by se nikdo nedÃ­val (protoÅ¾e jÃ¡ poÄÃ­taÄuju, takÅ¾e se nedÃ­vÃ¡m ğŸ¥²) ğŸ’ƒ",
        "NapiÅ¡ si seznam 3 vÄ›cÃ­ ze vÄerejÅ¡ka, za kterÃ© jsi vdÄ›ÄnÃ¡ ğŸ™",
      ];
      const box = document.getElementById('activity-result');
      const btn = document.querySelector('button[onclick="generateActivity()"]');

      // Efekt losovÃ¡nÃ­
      let counter = 0;
      btn.disabled = true; // Aby neklikala zbÄ›sile
      box.classList.remove('highlight');

      const shuffle = setInterval(() => {
        box.innerText = activities[Math.floor(Math.random() * activities.length)];
        counter++;
        if (counter > 10) {
          clearInterval(shuffle);
          // FinÃ¡lnÃ­ volba
          const finalChoice = activities[Math.floor(Math.random() * activities.length)];
          box.innerText = finalChoice;
          box.classList.add('highlight');
          btn.disabled = false;
          btn.innerText = "Chci zkusit losovat znovu ğŸ”„";
        }
      }, 100);
    }
  </script>
</body>

</html>